# この実験で得られる結果の読み方

## 1. 得られるデータの種類

実験終了（再生停止）時に、`ExperimentData/` フォルダに次のファイルが保存されます。

| ファイル | 中身 |
|----------|------|
| **\*_summary.txt** | 実験全体の要約（総時間・総捕食数・最初の捕食までの時間・平均捕食率） |
| **\*_captures.csv** | 各捕食イベントごとの記録 |
| **\*_snapshots.csv** | 5秒ごとの群れの状態 |
| **\*_parameters.csv** | 使ったパラメータ一覧 |

---

## 2. 何が「実験結果」になるか

### (1) 評価指標（課題で使うもの）

| 指標 | どこに書いてある | 意味 |
|------|------------------|------|
| **時間当たりの捕食数** | summary の「Average Capture Rate」／captures の `capture_rate_per_min` | 1分あたり何匹捕食したか。高いほど捕食者が有利。 |
| **最初に捕食に成功するまでの時間** | summary の「First Kill Time」 | 何秒で1匹目を捕まえたか。短いほど捕食者が有利。 |

これらを「群れの大きさ」「群れの密度」「群れパラメータ」を変えて比較すると、**どの条件で被捕食者が守られやすいか**がわかります。

---

### (2) 想定される実験結果のパターン

**仮説（Confusion Effect に基づく）**

- **群れが大きいほど**  
  → 最初の捕食までの時間が**長く**なり、時間当たりの捕食数は**少なく**なる（捕食者にとって不利）。
- **群れが密なほど（密度が高いほど）**  
  → 捕食者の視界に多くの魚が入り、混乱しやすく、同様に捕食が難しくなる。
- **群れパラメータ（cohesion / alignment など）**  
  → 群れの形・まとまり方が変わり、捕食のしやすさが変わる。

**実験のやり方の例**

1. **魚の数だけ変える**（例：20匹 vs 50匹 vs 100匹）  
   → 各条件で「最初の捕食までの時間」と「時間当たりの捕食数」を比較。
2. **BoidSettings の cohesion / alignment / separation を変える**  
   → 密な群れ vs バラけた群れで、上記2指標を比較。
3. **捕食者の confusionStrength を変える**（0 vs 0.5 vs 1.0）  
   → 混乱効果を強くすると、時間当たりの捕食数が減るか確認。

---

## 3. 各CSVの見方

### \*_captures.csv

| 列 | 意味 | 分析での使い方 |
|----|------|----------------|
| time_sec | その捕食が起きた時刻（秒） | 横軸にして「いつ捕食が起きたか」の時系列を描く |
| kill_number | 何匹目の捕食か | 縦軸にして捕食の累積数を描く |
| capture_rate_per_min | その時点での「分あたり捕食数」 | 時間経過とともにどう変化するかを見る |
| boids_in_view | 捕食時に視界にいた魚の数 | **多い＝混乱していた**。多いときほど捕食が難しくなっているか確認 |
| remaining_boids | 捕食後の残り魚数 | 群れが小さくなるほど捕食が楽になるか見る |

**グラフ例**

- 横軸：`time_sec`、縦軸：`kill_number` → 捕食の累積曲線。
- 横軸：`boids_in_view`、縦軸：何か別指標 → 視界内の魚数と捕食の関係。

---

### \*_snapshots.csv

| 列 | 意味 | 分析での使い方 |
|----|------|----------------|
| time_sec | スナップショットの時刻 | 時系列の横軸 |
| total_boids | その時点の魚の数 | 捕食で減っていく様子を描く |
| total_kills | その時点までの累計捕食数 | 捕食の進行度 |
| capture_rate_per_min | その時点での分あたり捕食率 | 時間経過でどう変わるか |
| avg_neighbor_dist | 平均近傍距離（群れの密度の逆） | 小さい＝密、大きい＝疎。捕食で群れがバラけるか見る |
| polarization | 群れの極性（向きの揃い） | 1に近い＝向きが揃っている。捕食で乱れるか見る |

**グラフ例**

- 時間 vs 魚数 → 捕食で群れがどれだけ減るか。
- 時間 vs 密度／極性 → 捕食者がいると群れの形がどう変わるか。

---

### \*_summary.txt

- **Total Duration**：実験時間（秒）。
- **Total Kills**：捕食数。
- **First Kill Time**：**最初に捕食に成功するまでの時間**（秒）。課題の指標の一つ。
- **Average Capture Rate**：**時間当たりの捕食数**（分あたり）。課題のもう一つの指標。
- **Initial Boid Count**：最初の魚の数（スナップショットから推定）。

ここから「時間当たりの捕食数」と「最初の捕食までの時間」を読み取り、条件ごとに表にまとめると実験結果になります。

---

### \*_parameters.csv

- その実験で使った Boid と捕食者のパラメータ一覧。
- 条件を変えた実験を複数回やったとき、「何を変えた実験か」を後から確認するために使います。

---

## 4. 実験の進め方（まとめ）

1. **同じ条件で数回走らせる**（例：魚50匹で3回）  
   → ばらつきを確認。
2. **1つの要素だけ変えて比較**（例：魚の数だけ 20 / 50 / 100）  
   → 「群れが大きいと最初の捕食まで長いか」「時間当たりの捕食数が減るか」を確認。
3. **CSVをExcelやPythonで開く**  
   → 上記の指標で表・グラフを作る。
4. **レポートに書く内容**  
   - 何を変えたか（パラメータ・条件）  
   - 得られた数値（最初の捕食までの時間、時間当たりの捕食数）  
   - グラフ（捕食の時系列、条件間の比較）  
   - 「群れが大きい／密だと捕食が難しくなり、Confusion Effect と一致する」などの考察  

**結論として得られる実験結果は、主に次の2つです。**

- **時間当たりの捕食数**：パラメータを変えるとどう変わるか（表・グラフ）。
- **最初に捕食に成功するまでの時間**：同様に条件ごとの比較。

これに「視界内の魚数（boids_in_view）と捕食の関係」や「群れの密度・極性の時間変化」を足すと、Confusion Effect の説明として説得力が増します。
